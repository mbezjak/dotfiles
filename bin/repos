#!/bin/bash
#

set -o errexit

rootdirs() {
    echo "$HOME/workspace"
    echo "$HOME/workspace/xincubation"
    echo "$HOME/Dropbox"
}

projects() {
    find -L $(rootdirs) -mindepth 1 -maxdepth 2 -name '.git' -printf "%h\n"
    find -L $(rootdirs) -mindepth 1 -maxdepth 2 -name '.hg' -printf "%h\n"
}

projects | parallel --jobs 10 "cd {}; vcproject $1"

exit 0
