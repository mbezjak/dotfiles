#!/bin/bash
#

set -o errexit

workspaces() {
    echo "$HOME/workspace"
    echo "$HOME/workspace/xincubation"
    echo "$HOME/Dropbox"
}

projects() {
    find -L $(workspaces) -mindepth 2 -maxdepth 2 \
        \( -name '.git' -or -name '.hg' \) -printf "%h\n"
}

projects | parallel --jobs 10 "cd {}; repo-sync"

exit 0
